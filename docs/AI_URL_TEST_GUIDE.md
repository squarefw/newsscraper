# AI URL 测试脚本使用指南

## 🎯 功能简介

`test-ai-url.js` 是一个增强版AI测试脚本，可以：
- 🌐 输入任意新闻网页URL
- 🤖 执行完整的AI处理流程
- 📊 生成详细的测试报告
- 📁 自动保存结果到reports目录

## 🚀 快速使用

### 基本命令
```bash
node test-ai-url.js
```

### 管道输入（批量测试）
```bash
echo "https://www.rte.ie/news/world/2025/0729/1525999-uk-palestine/" | node test-ai-url.js
```

## 📋 支持的新闻网站

✅ **已测试的网站**：
- RTE (爱尔兰广播电视公司)
- BBC (英国广播公司)
- CNN, Reuters, AP News 等主流媒体

⚙️ **自动适配**：
- 智能识别标题和正文
- 多种CSS选择器回退机制
- 处理不同网站结构

## 📊 测试报告内容

生成的报告包含：

### 1. 基本信息
- 测试时间和URL
- AI引擎和模型信息
- 原文内容和统计

### 2. AI处理结果
每个AI任务的详细信息：
- ✅ 处理状态（成功/失败）
- ⏱️ 处理时间
- 📝 输入和输出内容
- 📊 长度统计和比例

### 3. 性能分析
- 总处理时间和成功率
- 各任务完成情况
- 内容质量评估

### 4. 详细分析
- 翻译效果分析
- 重写完整性检查
- 摘要质量评估
- 改进建议

## 🔧 配置要求

- ✅ AI功能已启用 (`config.ai.enabled: true`)
- 🤖 AI引擎正常运行 (Ollama/OpenAI/Gemini等)
- 🌐 网络连接正常
- 📁 可写入权限 (用于保存报告)

## 📁 输出文件

报告文件命名格式：
```
ai-test-report-YYYY-MM-DDTHH-MM-SS.md
```

保存位置：
```
newsscraper/reports/
```

## 🎯 使用场景

### 开发调试
```bash
# 测试AI功能是否正常
node test-ai-url.js
```

### 质量评估
```bash
# 评估不同新闻类型的处理效果
echo "https://example-news-site.com/article" | node test-ai-url.js
```

### 性能测试
```bash
# 测试处理时间和准确性
for url in url1 url2 url3; do
  echo $url | node test-ai-url.js
done
```

## 💡 提示和技巧

1. **选择合适的测试URL**：
   - 推荐使用完整的新闻文章URL
   - 避免视频或图片为主的页面
   - 选择有明确标题和正文的文章

2. **分析报告结果**：
   - 关注重写任务的长度保持率（应≥80%）
   - 检查翻译准确性和语言自然度
   - 评估摘要是否抓住要点

3. **性能优化**：
   - 长文章可能需要更多处理时间
   - 可以根据需要调整AI任务列表
   - 网络延迟会影响网页抓取速度

## 🐛 常见问题

**Q: 网页抓取失败怎么办？**
A: 检查URL是否正确，网站是否可访问，是否有防爬措施

**Q: AI处理失败怎么办？**
A: 检查AI引擎状态，确认配置正确，网络连接正常

**Q: 报告保存失败怎么办？**
A: 确认reports目录存在且有写入权限

**Q: 处理时间过长怎么办？**
A: 考虑使用更快的AI模型，或减少AI任务数量

## 📈 示例报告分析

### 优秀示例
- ✅ 翻译准确，语言自然
- ✅ 重写保持80%以上长度
- ✅ 摘要简洁但信息完整
- ✅ 关键词提取相关度高

### 需要改进
- ⚠️ 重写长度不足80%
- ⚠️ 翻译有语法错误
- ⚠️ 摘要过于简略
- ⚠️ 分类不够准确

---

💡 **提示**: 查看完整的AI功能文档 [`AI_FEATURES_GUIDE.md`](./AI_FEATURES_GUIDE.md) 了解更多详细信息。
